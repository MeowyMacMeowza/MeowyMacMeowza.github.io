import{T as I}from"./nav.2567da24.js";import{r as _,o as l,m as y,l as v,g as e,t as d,f as i,i as b,h as r,n as w,j as h,k as f,w as T,v as C,F as g,p as N}from"./vendor.3cbabd63.js";import{_ as k}from"./plugin-vue_export-helper.3b9b12da.js";import{a as D}from"./amber-sad.b59289c6.js";import{I as x}from"./item_service.e79832af.js";import{I as E}from"./imagecaption.0034c228.js";import"./index.23d4519d.js";const R={data(){return{}},methods:{editItem(){this.$router.push("/pullable/"+this.item.name+"/edit")}},emits:["deleteItem"],props:["item","admin","modal"]},z=["src"],P={class:"d-flex flex-column w-100"},V={class:"d-flex"},j={class:"mb-1 me-auto"},B={class:"text-muted"},F={class:"d-flex"},L={class:"mb-1 text-wrap text-break me-auto",style:{"text-overflow":"ellipsis",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"9","-webkit-box-orient":"vertical","text-align":"justify"}},O={key:0,class:"ms-3 btn-group btn-group-sm align-self-start",role:"group","aria-label":"admin control"},W=e("span",{class:"material-icons align-bottom"}," mode_edit ",-1),A=h(" Edit "),J=[W,A],M=["data-bs-target"],G=e("span",{class:"material-icons align-bottom"}," delete ",-1),H=[G];function U(n,a,t,m,o,s){const p=_("router-link");return l(),y(p,{to:"/pullable/"+t.item.name,class:"d-flex list-group-item list-group-item-action",target:"_blank",rel:"noopener noreferrer",style:{"z-index":"0"}},{default:v(()=>[e("img",{class:"me-3 rounded-2 rounded my-auto",style:{"object-fit":"contain","max-width":"120px","max-height":"120px"},src:t.item.icon_img},null,8,z),e("div",P,[e("div",V,[e("h5",j,d(t.item.name),1),e("small",B,d(t.item.featured?"Event Exclusive":"Non-exclusive"),1)]),e("div",F,[e("p",L,d(t.item.desc),1),t.admin?(l(),i("div",O,[e("button",{type:"button",class:"btn btn-secondary ps-1 pe-2 stylised-black text-nowrap",onClick:a[0]||(a[0]=b((...u)=>s.editItem&&s.editItem(...u),["prevent"]))},J),e("button",{type:"button",class:"btn btn-danger px-2",onClick:a[1]||(a[1]=b(u=>n.$emit("deleteItem",t.item.name),["prevent"])),"data-bs-target":"#"+t.modal,"data-bs-toggle":"modal"},H,8,M)])):r("",!0)]),e("small",{class:w(["mt-auto mb-1",[t.item.rarity==5?"fiveStar":t.item.rarity==4?"fourStar":"threeStar"]])},d(t.item.rarity)+"* "+d(t.item.type),3)])]),_:1},8,["to"])}var Y=k(R,[["render",U]]);const q={data(){return{user:"",searchText:"",searchResult:[],loading:!1,del_loading:!1,success:!1,message:"",amberSad:D,deleteDialog:""}},mounted(){document.title="Search for Characters/Weapons"},computed:{loggedIn(){return this.user=JSON.parse(JSON.stringify(this.$store.state.auth.user)),this.$store.state.auth.status.loggedIn}},methods:{search(){const n=a=>new Promise(t=>setTimeout(t,a));this.message="",this.loading=!0,n(300).then(a=>{var t=[];this.$refs.threeStar.checked&&t.push(3),this.$refs.fourStar.checked&&t.push(4),this.$refs.fiveStar.checked&&t.push(5);var m=[];this.$refs.wep.checked&&m.push("W"),this.$refs.char.checked&&m.push("C");var o=[];this.$refs.exclusive.checked&&o.push(1),this.$refs.not_exclusive.checked&&o.push(0),x.searchItem({name:this.searchText,type:m,rarity:t,is_limited:o}).then(s=>{this.loading=!1,this.searchResult=s.data.items},s=>{this.loading=!1,this.message=s.response&&s.response.data&&s.response.data.message||s.message||s.toString()}).catch(s=>{this.loading=!1,this.message=s.response&&s.response.data&&s.response.data.message||s.message||s.toString()}),console.log(this.searchText)})},addItem(){this.$router.push("/pullable/new")},delName(n){this.deleteDialog=n},deleteItem(){const n=a=>new Promise(t=>setTimeout(t,a));this.message="",this.del_loading=!0,n(500).then(a=>{x.deleteItem(this.deleteDialog).then(t=>{this.success=!0,this.del_loading=!1,this.search(),n(800).then(m=>this.success=!1)}).catch(t=>{this.loading=!1,this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})})}},components:{TopNav:I,PullItem:Y,ImgCaption:E}},K={class:"d-flex flex-column container-xxl mt-5 px-5 pe-5 bd-layout bg-light shadow-lg rounded-3 content-body"},Q={class:"d-flex align-items-center mt-5"},X=e("p",{class:"fs-3 text-wrap lead grow-3 justified"},[e("b",{class:"stylised"}," Search for a character or weapon! ")],-1),Z={key:0,class:"alert alert-danger",role:"alert"},$=["disabled"],ee=["disabled"],te=["disabled"],se={class:"collapse mb-3 mx-3",id:"filter"},oe=e("p",{class:"mb-1 fs-5"},"Filter Options",-1),ae={class:"d-flex align-items-center"},le=e("span",{class:"mb-2 mx-1"},"Rarity:",-1),ie={class:"btn-group mb-2 mx-1",role:"group","aria-label":"Rarity"},ne={type:"checkbox",class:"btn-check",id:"threeStar",ref:"threeStar",autocomplete:"off"},ce=e("label",{class:"btn btn-outline-primary",for:"threeStar"},"3 \u2606",-1),de={type:"checkbox",class:"btn-check",id:"fourStar",ref:"fourStar",autocomplete:"off"},re=e("label",{class:"btn btn-outline-primary",for:"fourStar"},"4 \u2606",-1),me={type:"checkbox",class:"btn-check",id:"fiveStar",ref:"fiveStar",autocomplete:"off"},he=e("label",{class:"btn btn-outline-primary",for:"fiveStar"},"5 \u2606",-1),ue={class:"d-flex align-items-center"},_e=e("span",{class:"mb-2 mx-1"},"Type:",-1),be={class:"btn-group mb-2 mx-1",role:"group","aria-label":"Rarity"},pe={type:"checkbox",class:"btn-check",id:"wep",ref:"wep",autocomplete:"off"},fe=e("label",{class:"btn btn-outline-primary",for:"wep"},"Weapon",-1),ge={type:"checkbox",class:"btn-check",id:"char",ref:"char",autocomplete:"off"},xe=e("label",{class:"btn btn-outline-primary",for:"char"},"Character",-1),ye={class:"d-flex align-items-center"},ve=e("span",{class:"mb-2 mx-1"},"Exclusivity:",-1),ke={class:"btn-group mb-2 mx-1",role:"group","aria-label":"Rarity"},Se={type:"checkbox",class:"btn-check",id:"exclusive",ref:"exclusive",autocomplete:"off"},Ie=e("label",{class:"btn btn-outline-primary",for:"exclusive"},"Event Exclusive",-1),we={type:"checkbox",class:"btn-check",id:"not_exclusive",ref:"not_exclusive",autocomplete:"off"},Te=e("label",{class:"btn btn-outline-primary",for:"not_exclusive"},"Non-Exclusive",-1),Ce={key:1,class:"list-group list-group-flush med-search mb-3",id:"result-list"},Ne={key:2,class:"d-flex my-auto"},De=e("i",null,"There be are no results :c",-1),Ee={key:3,class:"card d-flex flex-column align-items-center py-3 px-4 position-absolute top-50 start-50 translate-middle",style:{"z-index":"1060"}},Re=e("strong",{class:"mb-3"},"Searching",-1),ze=e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Pe=[Re,ze],Ve={key:4,class:"offcanvas-backdrop fade show"},je={key:5,class:"card d-flex flex-column align-items-center py-3 px-4 position-absolute top-50 start-50 translate-middle",style:{"z-index":"1060"}},Be={class:"mb-3"},Fe=e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Le={key:6},Oe=e("div",{class:"card d-flex flex-column align-items-center py-4 px-5 position-fixed top-50 start-50 translate-middle",style:{"z-index":"1060"}},[e("span",{class:"material-icons text-success",style:{"font-size":"3rem"}}," task_alt "),e("strong",{class:""},"Success!")],-1),We=[Oe],Ae=e("p",{class:"mt-3 mb-5 smol-text"}," \xA9 G neshni shni \xA9 ",-1),Je={class:"modal fade",id:"delDialog",tabindex:"-1","aria-labelledby":"delDialogLabel","aria-hidden":"true"},Me={class:"modal-dialog"},Ge={class:"modal-content"},He=e("div",{class:"modal-header"},[e("h3",{class:"modal-title"},[e("b",null,"Hold up! Are you sure?")]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ue={class:"modal-body mb-3 fs-5"},Ye=h(" This deletion is an "),qe=e("b",{class:"text-danger"},"irreversible",-1),Ke=h(" action."),Qe=e("br",null,null,-1),Xe=h(" You cannot retrieve "),Ze=h(" back after the deletion! "),$e={class:"modal-footer"},et=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1);function tt(n,a,t,m,o,s){const p=_("TopNav"),u=_("PullItem"),S=_("ImgCaption");return l(),i(g,null,[f(p),e("div",K,[e("div",Q,[X,s.loggedIn&&o.user.admin?(l(),i("button",{key:0,class:"btn btn-outline-success btn-sm ms-auto stylised-black",onClick:a[0]||(a[0]=(...c)=>s.addItem&&s.addItem(...c))},"New Pullable")):r("",!0)]),o.message?(l(),i("div",Z,d(o.message),1)):r("",!0),e("form",{class:"d-flex my-4",onSubmit:a[2]||(a[2]=b((...c)=>s.search&&s.search(...c),["prevent"]))},[T(e("input",{class:"form-control me-3",type:"search",placeholder:"Type here and search","aria-label":"Search",id:"search-input","onUpdate:modelValue":a[1]||(a[1]=c=>o.searchText=c),disabled:o.loading},null,8,$),[[C,o.searchText]]),e("button",{class:"btn",type:"submit",id:"search-button",style:{color:"var(--primary-color-dark)","border-color":"var(--primary-color-light)"},disabled:o.loading},"Search",8,ee),e("a",{class:"btn btn-primary ms-3","data-bs-toggle":"collapse",href:"#filter",role:"button","aria-expanded":"false","aria-controls":"collapseExample",disabled:o.loading}," Filter ",8,te)],32),e("div",se,[oe,e("div",ae,[le,e("div",ie,[e("input",ne,null,512),ce,e("input",de,null,512),re,e("input",me,null,512),he])]),e("div",ue,[_e,e("div",be,[e("input",pe,null,512),fe,e("input",ge,null,512),xe])]),e("div",ye,[ve,e("div",ke,[e("input",Se,null,512),Ie,e("input",we,null,512),Te])])]),o.searchResult.length>0?(l(),i("div",Ce,[(l(!0),i(g,null,N(o.searchResult,c=>(l(),y(u,{class:"nav-item list-group-item",item:c,admin:s.loggedIn&&o.user.admin,onDeleteItem:s.delName,modal:"delDialog"},null,8,["item","admin","onDeleteItem"]))),256))])):(l(),i("div",Ne,[f(S,{imgSrc:o.amberSad},{default:v(()=>[De]),_:1},8,["imgSrc"])])),o.loading?(l(),i("div",Ee,Pe)):r("",!0),o.loading?(l(),i("div",Ve)):r("",!0),o.del_loading?(l(),i("div",je,[e("strong",Be,"Deleting "+d(o.deleteDialog),1),Fe])):r("",!0),o.success?(l(),i("div",Le,We)):r("",!0),Ae]),e("div",Je,[e("div",Me,[e("div",Ge,[He,e("div",Ue,[Ye,qe,Ke,Qe,Xe,e("code",null,[e("b",null,d(o.deleteDialog),1)]),Ze]),e("div",$e,[e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:a[3]||(a[3]=b((...c)=>s.deleteItem&&s.deleteItem(...c),["prevent"]))},"Delete Anyways"),et])])])])],64)}var dt=k(q,[["render",tt]]);export{dt as default};
