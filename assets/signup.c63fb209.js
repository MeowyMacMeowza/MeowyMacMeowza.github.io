import{_ as h,U as u}from"./plugin-vue_export-helper.3b9b12da.js";import{f as a,g as s,t as g,h as r,w as d,v as c,i as f,j as _,o as i}from"./vendor.3cbabd63.js";const b={data(){return{message:"",username:"",email:"",password:"",password2:"",pfp:"",loading:!1,success:!1}},mounted(){this.$store.state.auth.status.loggedIn&&this.$router.push("/"),document.title="Create a Gneshni Account"},methods:{register(){if(this.loading=!0,this.message="",this.username.length==0||this.username.length>20){this.message="Invalid username! Username must be of length 1-20.",this.loading=!1;return}if(this.email.length==0||this.email.length>50){this.message="Invalid email!",this.loading=!1;return}if(this.pfp==null){this.message="Please attach a profile picture!",this.loading=!1;return}if(this.password.valueOf()!=this.password2.valueOf()){this.message="Passwords no not match!",this.loading=!1;return}u.upload(this.pfp).then(l=>{this.$store.dispatch("auth/register",{username:this.username,email:this.email,password:this.password,pfp_url:l.data.newfile}).then(()=>{this.success=!0,(m=>new Promise(p=>setTimeout(p,m)))(1500).then(m=>{this.$router.push("/")})},t=>{this.loading=!1,this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}).catch(l=>{this.loading=!1,this.message=l.response&&l.response.data&&l.response.data.message||l.message||l.toString()})},attachPfp(l){this.pfp=l.target.files[0]}}},y={class:"d-flex flex-column w-50 mx-auto px-3 my-5 bg-white shadow-lg position-relative",style:{"--bs-bg-opacity":".8",padding:"3rem 5rem 3rem 5rem"}},w=s("h1",{class:"d-flex align-self-center mb-5 mt-3",style:{color:"var(--primary-color-dark)"}}," \u2661 Sign up for Gneshni! \u2661 ",-1),v=s("a",{class:"position-absolute top-0 start-0 mt-4 ms-4 primary-dark-text stylised-black",href:"/"},[s("span",{class:"material-icons align-bottom"}," keyboard_backspace "),_(" Go Back to Website ")],-1),x={key:0,class:"alert alert-danger",role:"alert"},k={class:"row col-10"},U={class:"mb-4 col-5"},P=s("label",{for:"usernameInput",class:"form-label"},"Username",-1),A=["disabled"],I={class:"mb-4 col-7"},S=s("label",{for:"customerEmail",class:"form-label"},"Email address",-1),V=["disabled"],E={class:"mb-4 col-8"},G=s("label",{for:"password1",class:"form-label"},"Password",-1),T=["disabled"],z={class:"mb-4 col-8"},B=s("label",{for:"password2",class:"form-label"},"Re-enter your password",-1),C=["disabled"],N={class:"mb-4 col-12"},M=s("label",{for:"relevantFiles",class:"form-label"},"Profile picture",-1),R=["disabled"],W=["disabled"],D={key:0,class:"card d-flex flex-column align-items-center py-3 px-4 position-absolute top-50 start-50 translate-middle",style:{"z-index":"1060"}},F=s("strong",{class:"mb-3"},"Registering",-1),O=s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),j=[F,O],J={key:1},L=s("div",{class:"card d-flex flex-column align-items-center py-4 px-5 position-absolute top-50 start-50 translate-middle",style:{"z-index":"1060"}},[s("span",{class:"material-icons text-success",style:{"font-size":"3rem"}}," task_alt "),s("strong",{class:""},"Success!")],-1),Q=[L],q={key:2,class:"offcanvas-backdrop fade show"},H=s("figure",{class:"align-self-center"},[s("img",{class:"img-fluid rounded-3 shadow my-2",src:"https://c.tenor.com/lJ9fTsaelzQAAAAC/paimon-smug.gif",alt:"yes."}),s("figcaption",{style:{"text-align":"center",color:"gray"}},[s("i",null,"WE AM WAITING.")])],-1),K=s("p",{class:"mt-3 ms-5 smol-text"}," \xA9 G neshni shni \xA9 ",-1);function X(l,t,m,p,e,n){return i(),a("div",y,[w,v,s("form",{class:"d-flex flex-column align-items-center mx-2 mb-5",onSubmit:t[5]||(t[5]=f((...o)=>n.register&&n.register(...o),["prevent"]))},[e.message?(i(),a("div",x,g(e.message),1)):r("",!0),s("div",k,[s("div",U,[P,d(s("input",{type:"text",class:"form-control",id:"usernameInput",placeholder:"EpixGneshniUser",disabled:e.loading,"onUpdate:modelValue":t[0]||(t[0]=o=>e.username=o)},null,8,A),[[c,e.username]])]),s("div",I,[S,d(s("input",{type:"email",class:"form-control",id:"customerEmail",placeholder:"epic@website.wish",disabled:e.loading,"onUpdate:modelValue":t[1]||(t[1]=o=>e.email=o)},null,8,V),[[c,e.email]])]),s("div",E,[G,d(s("input",{type:"password",class:"form-control",id:"password1",placeholder:"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:e.loading,"onUpdate:modelValue":t[2]||(t[2]=o=>e.password=o)},null,8,T),[[c,e.password]])]),s("div",z,[B,d(s("input",{type:"password",class:"form-control",id:"password2",placeholder:"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022",disabled:e.loading,"onUpdate:modelValue":t[3]||(t[3]=o=>e.password2=o)},null,8,C),[[c,e.password2]])]),s("div",N,[M,s("input",{class:"form-control",type:"file",id:"relevantFiles",accept:"image/*",disabled:e.loading,onChange:t[4]||(t[4]=(...o)=>n.attachPfp&&n.attachPfp(...o))},null,40,R)])]),s("button",{type:"submit",class:"btn align-self-center btn-lg text-white",style:{"background-color":"var(--primary-color)"},id:"create_account",disabled:e.loading},"Register!",8,W)],32),e.loading?(i(),a("div",D,j)):r("",!0),e.success?(i(),a("div",J,Q)):r("",!0),e.loading||e.success?(i(),a("div",q)):r("",!0),H,K])}var $=h(b,[["render",X]]);export{$ as default};
