import{T as k}from"./nav.a7637ad2.js";import{I as S}from"./imagecaption.0034c228.js";import{W}from"./WishHistory.99e4ddfc.js";import{a as N}from"./amber-sad.b59289c6.js";import{v as I,s as C}from"./sucrose-noted.2e9710ac.js";import{h as T}from"./hutao-teehee.f60ddafe.js";import{W as $}from"./aether-shookt.245e02f8.js";import{U as L}from"./user_service.7e84cddd.js";import{f as l,k as h,g as s,m as y,l as p,j as a,t as d,i as U,h as b,F as _,p as v,r as u,o as r}from"./vendor.3cbabd63.js";import{_ as H}from"./plugin-vue_export-helper.3b9b12da.js";import"./index.1076bc26.js";const P={data(){return{user:"",game_acc:"",wishes:[],bnrs:[{name:"Standard",id:2},{name:"Novice",id:1},{name:"Event Character",id:3},{name:"Event Weapon",id:4}],amberSad:N,isLoaded:!1,error:!1,ventiWow:I,sucroseNoted:C,hutaoTeehee:T}},created(){this.loggedIn&&(this.user=JSON.parse(JSON.stringify(this.$store.state.auth.user))),(!this.$route.params.uid||!this.$route.params.user_id)&&this.$router.push("/"),$.getWishes({user_id:this.$route.params.user_id,uid:this.$route.params.uid}).then(t=>{this.wishes=t.data.wishes.reverse();let i={1:{4:0,5:0,first4:!0,first5:!0},2:{4:0,5:0,first4:!0,first5:!0},3:{4:0,5:0,first4:!0,first5:!0},4:{4:0,5:0,first4:!0,first5:!0}};for(const e of this.wishes)i[e.bnr_id][4]++,i[e.bnr_id][5]++,e.rarity!=3&&(e.pity=i[e.bnr_id][e.rarity],e.isFirst=i[e.bnr_id]["first"+e.rarity],i[e.bnr_id]["first"+e.rarity]=!1,i[e.bnr_id][e.rarity]=0);this.wishes.reverse(),L.getUserProfile(this.$route.params.user_id).then(e=>{this.user=e.data;for(const m of e.data.game_accounts)if(m.uid==this.$route.params.uid){this.game_acc=m;break}if(!this.game_acc){this.error=!0;return}document.title="Wish History (UID: "+this.$route.params.uid+")",this.isLoaded=!0},e=>{console.log(e.response&&e.response.data&&e.response.data.message||e.message||e.toString()),this.error=!0}).catch(e=>{console.log(e.response&&e.response.data&&e.response.data.message||e.message||e.toString()),this.error=!0})},t=>{console.log(t.response&&t.response.data&&t.response.data.message||t.message||t.toString()),this.error=!0}).catch(t=>{console.log(t.response&&t.response.data&&t.response.data.message||t.message||t.toString()),this.error=!0})},computed:{loggedIn(){return this.user=JSON.parse(JSON.stringify(this.$store.state.auth.user)),this.$store.state.auth.status.loggedIn},isUser(){return!this.$route.params.user_id||this.user&&this.$route.params.user_id==this.user.user_id},last_synced(){var t=new Date(this.game_acc.last_synced);return t.toLocaleString()}},methods:{shareProfile(){var t=window.location.href;navigator.clipboard.writeText(t),alert("Copied URL to clipboard! ")},filterWishes(t){return this.wishes.filter(function(i){return i.bnr_id==t})}},components:{TopNav:k,ImgCaption:S,WishHistory:W}},B={key:0,class:"position-relative container-xxl mt-5 px-0 bd-layout shadow-lg rounded-top profile-bg"},D={class:"d-flex flex-column darken-bg rounded-top py-4 px-5 stylised-secondary fs-3"},F={class:"display-4"},J={class:"ms-3"},O={class:"fs-6 stylised-secondary-dark"},V={class:"ms-3"},A=s("br",null,null,-1),E={class:"ms-3 stylised-secondary-dark fs-5"},M=s("span",{class:"material-icons align-bottom me-1"}," share ",-1),R=a(" Share "),j=[M,R],G={key:1,class:"d-flex flex-column container-xxl px-5 pe-5 bd-layout bg-light shadow-lg rounded-bottom content-body"},q=s("div",{class:"fs-3 text-center stylised mt-4"},[a(" Wish History "),s("button",{class:"btn btn-sm material-icons mx-0 px-0 py-0 primary-text","data-bs-target":"#wishInfo","data-bs-toggle":"modal"}," help_outline ")],-1),z={class:"nav flex-column nav-pills flex-sm-row my-4",id:"pills-tab",role:"tablist"},K=s("li",{class:"nav-pills-primary grow-1 flex-sm-fill nav-item mx-3",role:"presentation"},[s("a",{class:"text-sm-center nav-link active",id:"pills-all-tab","data-bs-toggle":"pill","data-bs-target":"#all",type:"button",role:"tab","aria-controls":"pills-all","aria-selected":"true"},"All Wishes")],-1),Q={class:"nav-pills grow-1 flex-sm-fill nav-item me-3",role:"presentation"},X=["id","data-bs-target","aria-controls"],Y={class:"tab-content mb-auto",id:"pills-tabContent"},Z={class:"tab-pane fade show active mb-5",id:"all",role:"tabpanel","aria-labelledby":"pills-all-tab"},ss=["id","aria-labelledby"],es=s("p",{class:"mt-3 mb-5 smol-text"}," \xA9 G neshni shni \xA9 ",-1),ts={key:2,class:"d-flex mt-5 py-5 bg-light shadow-lg w-50 mx-auto"},as=s("h4",null,[a(" There was an error opening the page..."),s("br"),a(" Maybe the link is wrong? ")],-1),is=s("div",{class:"modal fade",id:"wishInfo","aria-hidden":"true","aria-labelledby":"Wish Information",tabindex:"-1",role:"dialog"},[s("div",{class:"modal-dialog modal-lg"},[s("div",{class:"modal-content"},[s("div",{class:"modal-header stylised-black fs-3"},[s("span",{class:"mx-auto"}," Wish Information"),s("button",{type:"button",class:"position-absolute end-0 top-0 btn-close mx-3 my-3","data-bs-dismiss":"modal","aria-label":"Close"})]),s("div",{class:"modal-body"},[s("h4",null,"What are those... things below?"),s("p",{class:"fs-5"},[a(" Those are this user's wish history together with their pulls! "),s("br"),a(" Clicking on the pulls will bring you to the respective weapon/character page. "),s("br"),a(" For every four/five star, their pity will also be shown together with the pull information. "),s("br"),s("b",null,[a(" Note: The earliest pulls found will have a "),s("span",{class:"text-danger"},"red asterisk (*)"),a(" beside the pity number because that pity count may be inaccurate due to the erosion of wish history. ")]),s("br"),s("br"),a(" If you want to look at user's profile, click the user's username to go there! ")])]),s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary btn-lg","data-bs-dismiss":"modal"},"Close")])])])],-1);function os(t,i,e,m,n,c){const w=u("TopNav"),f=u("router-link"),g=u("WishHistory"),x=u("ImgCaption");return r(),l(_,null,[h(w),n.isLoaded&&!n.error?(r(),l("div",B,[s("div",D,[s("h1",F,[c.isUser?(r(),y(f,{key:0,to:"/user",class:"text-decoration-none stylised"},{default:p(()=>[a(d(this.user.username),1)]),_:1})):(r(),y(f,{key:1,to:`/user/${this.$route.params.user_id}`,class:"text-decoration-none stylised"},{default:p(()=>[a(d(this.user.username),1)]),_:1},8,["to"]))]),s("span",J,[a("Account Name: "+d(this.game_acc.nickname)+" ",1),s("i",O,"(UID: "+d(this.game_acc.uid)+")",1)]),s("span",V,"Adventure Rank: "+d(this.game_acc.ar),1),A,s("span",E,"Last Synced: "+d(c.last_synced),1)]),s("button",{class:"position-absolute top-0 end-0 btn btn-primary py-1 px-2 me-2 mt-2 stylised-black",onClick:i[0]||(i[0]=U((...o)=>c.shareProfile&&c.shareProfile(...o),["prevent"]))},j)])):b("",!0),n.isLoaded&&!n.error?(r(),l("div",G,[q,s("ul",z,[K,(r(!0),l(_,null,v(n.bnrs,o=>(r(),l("li",Q,[s("a",{class:"text-sm-center nav-link",id:`pills-bnr${o.id}-tab`,"data-bs-toggle":"pill","data-bs-target":`#bnr${o.id}`,type:"button",role:"tab","aria-controls":`Pills ${o.name}`,"aria-selected":"false"},d(o.name),9,X)]))),256))]),s("div",Y,[s("div",Z,[h(g,{wishes:n.wishes},null,8,["wishes"])]),(r(!0),l(_,null,v(n.bnrs,o=>(r(),l("div",{class:"tab-pane fade mb-5",id:`bnr${o.id}`,role:"tabpanel","aria-labelledby":`pills-bnr${o.id}-tab`},[h(g,{bnr:o,wishes:c.filterWishes(o.id)},null,8,["bnr","wishes"])],8,ss))),256))]),es])):b("",!0),n.error?(r(),l("div",ts,[h(x,{imgSrc:n.amberSad},{default:p(()=>[as]),_:1},8,["imgSrc"])])):b("",!0),is],64)}var fs=H(P,[["render",os]]);export{fs as default};
