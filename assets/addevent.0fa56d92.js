import{T as I}from"./nav.a7637ad2.js";import{a as w}from"./amber-sad-image404.4efa4708.js";import{I as k}from"./imagecaption.0034c228.js";import{I as C}from"./NewItemCard.216c7ed1.js";import{I as v}from"./item_service.99a95ea1.js";import{E}from"./event_service.35f26592.js";import{f as l,k as N,g as e,t as m,h as c,w as d,z as b,v as u,F as h,p as _,j as p,r as g,o as n,m as y}from"./vendor.3cbabd63.js";import{_ as T}from"./plugin-vue_export-helper.3b9b12da.js";import"./index.1076bc26.js";const D={data(){return{user:"",message:"",loading:!1,amberSad:w,success:!1,img_url:"",event_name:"",start_time:"",end_time:"",type:"Character",fiveStar:[],fourStar:[],possibleFiveStar:[],possibleFourStar:[],searchedFive:"",searchedFour:""}},created(){(!this.loggedIn||!JSON.parse(JSON.stringify(this.$store.state.auth.user)).admin)&&this.$router.push("/"),document.title="Add an event banner",v.searchItem({name:"",rarity:[4]}).then(a=>{this.possibleFourStar=a.data.items}),v.searchItem({name:"",rarity:[5]}).then(a=>{this.possibleFiveStar=a.data.items})},computed:{loggedIn(){return this.user=JSON.parse(JSON.stringify(this.$store.state.auth.user)),this.$store.state.auth.status.loggedIn},filteredFive(){return this.possibleFiveStar.filter(a=>a.type==this.type&&a.name.toLowerCase().includes(this.searchedFive.toLowerCase()))},filteredFour(){return this.possibleFourStar.filter(a=>a.type==this.type&&a.name.toLowerCase().includes(this.searchedFour.toLowerCase()))}},methods:{addEvent(){const a=t=>new Promise(i=>setTimeout(i,t));this.message="",this.loading=!0,a(250).then(t=>{if(this.event_name.length<=0||this.event_name.length>50){this.message="Invalid Event Name",this.loading=!1;return}if(!this.start_time||!this.end_time){this.message="Invalid Duration",this.loading=!1;return}if(this.img_url.length==0){this.message="Invalid Banner Image",this.loading=!1;return}if(this.fiveStar.length==0){this.message="There are no featured 5\u2606s",this.loading=!1;return}if(this.fourStar.length==0){this.message="There are no featured 5\u2606s",this.loading=!1;return}E.addEvent({event_name:this.event_name,type:this.type[0],start_time:new Date(this.start_time).toISOString().slice(0,19).replace("T"," "),end_time:new Date(Date.parse(this.end_time)-1e3).toISOString().slice(0,19).replace("T"," "),img_url:this.img_url,wish_pool:this.fiveStar.concat(this.fourStar)}).then(i=>{this.success=!0,(s=>new Promise(r=>setTimeout(r,s)))(1500).then(s=>{this.$router.push("/event")})},i=>{this.loading=!1,this.message=i.response&&i.response.data&&i.response.data.message||i.message||i.toString()}).catch(i=>{this.loading=!1,this.message=i.response&&i.response.data&&i.response.data.message||i.message||i.toString()})})},bnrImgError(a){a.target.src=this.amberSad},removeFiveStar(a){this.fiveStar=this.fiveStar.filter(function(t){return t.name!==a.name}),this.possibleFiveStar.push(a)},removeFourStar(a){this.fourStar=this.fourStar.filter(function(t){return t.name!==a.name}),this.possibleFourStar.push(a)},addFive(a){this.fiveStar.push(a),this.searchedFive="",this.possibleFiveStar=this.possibleFiveStar.filter(function(t){return t.name!==a.name})},addFour(a){this.fourStar.push(a),this.searchedFour="",this.possibleFourStar=this.possibleFourStar.filter(function(t){return t.name!==a.name})}},watch:{type(a){a=="Weapon"?this.event_name="Epitome Invocation":this.event_name="";for(const t of this.fiveStar)this.possibleFiveStar.push(t);this.fiveStar=[];for(const t of this.fourStar)this.possibleFourStar.push(t);this.fourStar=[]}},components:{TopNav:I,ImgCaption:k,ItemCard:C}},V={class:"d-flex flex-column container-xxl mt-5 px-5 pe-5 bd-layout bg-light shadow-lg rounded-3 content-body"},B=e("div",{class:"d-flex"},[e("p",{class:"my-5 fs-1 text-wrap lead grow-3 justified text-center"},[e("b",{class:"stylised"}," Create a New Event ")])],-1),L={key:0,class:"alert alert-danger",role:"alert"},U={class:"d-flex mb-5"},O={class:"row grow-1 me-2 mb-auto gy-3"},R=e("div",{class:"stylised fs-4"}," Event Banner Information ",-1),z={class:"col-4"},A=e("label",{class:"form-label"}," Type of Banner ",-1),J={class:"btn-group mb-2 mx-1",role:"group","aria-label":"eventType"},W=e("label",{class:"btn btn-outline-primary",for:"charEvent"},"Character",-1),P=e("label",{class:"btn btn-outline-primary",for:"wepEvent"},"Weapon",-1),j={class:"col-12"},M=e("label",{for:"bnrName",class:"form-label"}," Banner Name ",-1),G=["disabled"],q={class:"col-6"},H=e("label",{for:"bnrName",class:"form-label"}," Start Duration ",-1),K={class:"col-6"},Q=e("label",{for:"bnrName",class:"form-label"}," End Duration ",-1),X=e("div",{class:"stylised fs-5 mt-5"}," Featured Items ",-1),Y=e("div",{class:"d-flex"},[p(" Featured 5 \u2606 "),e("button",{class:"btn btn-primary btn-sm align-self-start stylised-black ms-auto",type:"button","data-bs-toggle":"modal","data-bs-target":"#addFiveStar"}," + ")],-1),Z=e("div",{class:"d-flex"},[p(" Featured 4 \u2606 "),e("button",{class:"btn btn-primary btn-sm align-self-start stylised-black ms-auto",type:"button","data-bs-toggle":"modal","data-bs-target":"#addFourStar"}," + ")],-1),$=e("div",{class:"vr mx-2"},null,-1),ee={class:"grow-1"},te={class:"px-3 d-flex flex-column"},se=["src"],oe=e("p",{class:"text-center text-muted mb-5 mt-1"},"Banner Image Preview",-1),ae=e("label",{for:"bnrImg",class:"form-label mt-auto"},"Banner Image URL",-1),ie={class:"d-flex"},ne=e("p",{class:"mt-auto mb-5 smol-text"}," \xA9 G neshni shni \xA9 ",-1),re={class:"modal fade",id:"addFiveStar",tabindex:"-1","aria-labelledby":"addFiveStarLabel","aria-hidden":"true"},le={class:"modal-dialog"},de={class:"modal-content"},me={class:"modal-header"},ce={class:"modal-title"},ue=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),he={class:"modal-body"},_e={class:"d-flex align-items-center mb-4"},pe={class:"me-2"},fe=["placeholder"],ve={key:0,class:"border rounded-3 modal-search"},be={class:"my-2 mx-2 fs-5 d-flex align-items-center"},ge=["src"],ye=["onClick"],Se=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1),xe={class:"modal fade",id:"addFourStar",tabindex:"-1","aria-labelledby":"addFourStarLabel","aria-hidden":"true"},Fe={class:"modal-dialog"},Ie={class:"modal-content"},we={class:"modal-header"},ke={class:"modal-title"},Ce=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ee={class:"modal-body"},Ne={class:"d-flex align-items-center mb-4"},Te={class:"me-2"},De=["placeholder"],Ve={key:0,class:"border rounded-3 modal-search"},Be={class:"my-2 mx-2 fs-5 d-flex align-items-center"},Le=["src"],Ue=["onClick"],Oe=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1),Re={key:1,class:"card d-flex flex-column align-items-center py-3 px-4 position-fixed top-50 start-50 translate-middle",style:{"z-index":"1060"}},ze=e("strong",{class:"mb-3"},"Creating...",-1),Ae=e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Je=[ze,Ae],We={key:2},Pe=e("div",{class:"card d-flex flex-column align-items-center py-4 px-5 position-fixed top-50 start-50 translate-middle",style:{"z-index":"1060"}},[e("span",{class:"material-icons text-success",style:{"font-size":"3rem"}}," task_alt "),e("strong",{class:""},"Success!")],-1),je=[Pe],Me={key:3,class:"offcanvas-backdrop fade show"};function Ge(a,t,i,S,s,r){const x=g("TopNav"),f=g("ItemCard");return n(),l(h,null,[N(x),e("div",V,[B,s.message?(n(),l("div",L,m(s.message),1)):c("",!0),e("div",U,[e("div",O,[R,e("div",z,[A,e("div",J,[d(e("input",{type:"radio",class:"btn-check",id:"charEvent",autocomplete:"off",name:"eventType","onUpdate:modelValue":t[0]||(t[0]=o=>s.type=o),value:"Character",checked:""},null,512),[[b,s.type]]),W,d(e("input",{type:"radio",class:"btn-check",id:"wepEvent",autocomplete:"off",name:"eventType","onUpdate:modelValue":t[1]||(t[1]=o=>s.type=o),value:"Weapon"},null,512),[[b,s.type]]),P])]),e("div",j,[M,d(e("input",{type:"text",class:"form-control",placeholder:"Name","aria-label":"Banner Name",id:"bnrName","onUpdate:modelValue":t[2]||(t[2]=o=>s.event_name=o),disabled:s.type=="Weapon"},null,8,G),[[u,s.event_name]])]),e("div",q,[H,d(e("input",{type:"datetime-local",class:"form-control",placeholder:"Start Duration","aria-label":"Start Duration",id:"startDate","onUpdate:modelValue":t[3]||(t[3]=o=>s.start_time=o)},null,512),[[u,s.start_time]])]),e("div",K,[Q,d(e("input",{type:"datetime-local",class:"form-control",placeholder:"End Duration","aria-label":"End Duration",id:"endDate","onUpdate:modelValue":t[4]||(t[4]=o=>s.end_time=o)},null,512),[[u,s.end_time]])]),X,Y,(n(!0),l(h,null,_(s.fiveStar,o=>(n(),y(f,{key:o.name,item:o,onRemoveItem:r.removeFiveStar},null,8,["item","onRemoveItem"]))),128)),Z,(n(!0),l(h,null,_(s.fourStar,o=>(n(),y(f,{key:o.name,item:o,onRemoveItem:r.removeFourStar},null,8,["item","onRemoveItem"]))),128))]),$,e("div",ee,[e("div",te,[e("img",{class:"img-fluid align-self-center mx-3 mt-auto",src:s.img_url,onError:t[5]||(t[5]=(...o)=>r.bnrImgError&&r.bnrImgError(...o))},null,40,se),oe,ae,d(e("input",{class:"form-control form-control-sm",id:"bnrImg",type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.img_url=o)},null,512),[[u,s.img_url]])])])]),e("div",ie,[e("button",{class:"ms-auto btn btn-outline-success btn-lg me-auto",onClick:t[7]||(t[7]=(...o)=>r.addEvent&&r.addEvent(...o))},"Add Event")]),ne,e("div",re,[e("div",le,[e("div",de,[e("div",me,[e("h5",ce,"5 \u2606 "+m(s.type)+"s",1),ue]),e("div",he,[e("div",_e,[e("span",pe,"Search for 5 \u2606 "+m(s.type)+"s:",1),d(e("input",{class:"form-control form-control-sm grow-1",type:"text",placeholder:s.type+" Name","onUpdate:modelValue":t[8]||(t[8]=o=>s.searchedFive=o)},null,8,fe),[[u,s.searchedFive]])]),r.filteredFive.length>0?(n(),l("div",ve,[(n(!0),l(h,null,_(r.filteredFive,o=>(n(),l("div",be,[e("img",{class:"me-3",src:o.icon_img,style:{"max-width":"80px","max-height":"80px"}},null,8,ge),p(" "+m(o.name)+" ",1),e("button",{type:"button",class:"ms-auto btn btn-success btn-sm me-2","data-bs-dismiss":"modal",onClick:F=>r.addFive(o)},"Add",8,ye)]))),256))])):c("",!0)]),Se])])]),e("div",xe,[e("div",Fe,[e("div",Ie,[e("div",we,[e("h5",ke,"4 \u2606 "+m(s.type)+"s",1),Ce]),e("div",Ee,[e("div",Ne,[e("span",Te,"Search for 4 \u2606 "+m(s.type)+"s:",1),d(e("input",{class:"form-control form-control-sm grow-1",type:"text",placeholder:s.type+" Name","onUpdate:modelValue":t[9]||(t[9]=o=>s.searchedFour=o)},null,8,De),[[u,s.searchedFour]])]),r.filteredFour.length>0?(n(),l("div",Ve,[(n(!0),l(h,null,_(r.filteredFour,o=>(n(),l("div",Be,[e("img",{class:"me-3",src:o.icon_img,style:{"max-width":"80px","max-height":"80px"}},null,8,Le),p(" "+m(o.name)+" ",1),e("button",{type:"button",class:"ms-auto btn btn-success btn-sm me-2","data-bs-dismiss":"modal",onClick:F=>r.addFour(o)},"Add",8,Ue)]))),256))])):c("",!0)]),Oe])])]),s.loading?(n(),l("div",Re,Je)):c("",!0),s.success?(n(),l("div",We,je)):c("",!0),s.loading||s.success?(n(),l("div",Me)):c("",!0)])],64)}var tt=T(D,[["render",Ge]]);export{tt as default};
